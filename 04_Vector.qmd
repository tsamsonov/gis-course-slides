---
title: "Основы геоинформатики"
subtitle: "Лекция 4: Векторный и сетевой анализ"
date: 10.03.2023
author: "Самсонов Тимофей Евгеньевич"
execute:
  echo: false
engine: knitr
format:
  revealjs: 
    theme: [default, custom.scss]
    margin: 0.2
    slide-number: true
    footer: "Самсонов Т. Е. Основы геоинформатики: курс лекций для студентов географического факультета МГУ"
    header-includes: <link rel="stylesheet" media="screen" href="https://fontlibrary.org//face/pt-sans" type="text/css"/>
bibliography: references.yaml
mainfont: PT Sans
---

## Длина / периметр

::: columns
::: {.column width="50%"}
Рассчитываются как сумма длин отрезков, составляющих контур объекта:

$$
L =\\ \sum_{i=0}^{n-1}\sqrt{(x_{i+1}-x_i)^2 + (y_{i+1}-y_i)^2}
$$

::: callout-note
## Полигон

У полигона последняя точка должна иметь такие же координаты как и первая.
:::
:::

::: {.column width="50%"}
![](images/perimeter.svg){width="100%"}
:::
:::

## Площадь

::: columns
::: {.column width="50%"}
Рассчитывается как сумма площадей трапеций, ограниченных сверху отрезками, составляющими контур объекта:

$$
A = \frac{1}{2}\sum_{i=0}^{n-1} \underbrace{(y_{i+1}+y_{i})}_{\texttt{основания}}\underbrace{(x_{i+1}-x_{i})}_{\texttt{высота}}
$$

::: callout-note
## Отрицательная площадь

Трапеции, у которых $i+1$-я точка имеет меньший X, чем $i$-я, имеют отрицательную площадь.
:::
:::

::: {.column width="50%"}
![](images/area.svg){width="100%"}
:::
:::

## Принадлежность точки полигону

Луч, выпущенный из точки в направлении оси $X$, пересекает границу полигона **нечетное** количество раз.

::: columns
::: {.column width="60%"}
![](images/point_polygon.svg){width="90%"}
:::

::: {.column width="40%"}
::: callout-note
## Обратите внимание

Если луч пересекает одну из *вершин* полигона, это засчитывается как два пересечения, поскольку каждая вершина принадлежит двум отрезкам.
:::
:::
:::

::: callout-tip
## Применение

Данная операция активно используется при оценке топологических отношений --- например, для выполнения пространственных запросов.
:::

## Ограничивающий прямоугольник

::: columns
::: {.column width="50%"}
**Ограничивающий прямоугольник** определяет охват данных по осям координат.

Задаётся координатами углов:

-   левого нижнего $(x_{min}, y_{min})$

-   правого верхнего $(x_{max}, y_{max})$
:::

::: {.column width="50%"}
![](images/bbox.svg){width="100%"}
:::
:::

::: callout-tip
## Применение

Ограничивающий прямоугольник является важным элементом *метаданных* --- описания пространственных данных, но также используется и в аналитических задачах.
:::

## Выпуклая оболочка

::: columns
::: {.column width="50%"}
**Выпуклая оболочка** --- наименьший по площади выпуклый многоугольник, *покрывающий* заданное множество точек.

::: callout-note
## Выпуклое множество

Множество, в котором отрезок, соединяющий любые две точки также находится внутри этого множества.

![](images/non_convex.svg){width="65%"}
:::
:::

::: {.column width="50%"}
![](images/convex_hull.svg){width="75%"}

::: callout-tip
## Применение

Выпуклые оболочки используются для восстановления ареалов по точечным измерениям. Также выпуклая оболочка является границей *триангуляционного покрытия*.
:::
:::
:::

## Выпуклая оболочка

Известный метод построения --- **алгоритм Джарвиса** [@jarvis1973]:

::: columns
::: {.column width="50%"}
-   находим *нулевую* точку с минимальной координатой $X$;

-   ищем *первую* точку с минимальным дирекционным углом;

-   получаем отрезок $p_0 p_1$;

-   продолжаем поиск, находя следующий отрезок, образующий минимальный угол поворота относительно предыдущего.
:::

::: {.column width="50%"}
![](images/jarvis.gif)
:::
:::

## Диаграмма Вороного

::: columns
::: {.column width="40%"}
![](images/voronoy_outline.svg){width="100%"}
:::

::: {.column width="60%"}

Диаграмма Вороного

:   Диаграмма Вороного конечного множества точек $S$ на плоскости представляет такое разбиение плоскости, при котором каждая область этого разбиения образует множество точек, более близких к одному из элементов множества $S$, чем к любому другому элементу множества.
:::
:::

::: callout-tip
## Применение

Диаграмма Вороного используется при моделировании зон влияния объектов.
:::

## Триангуляционное покрытие

Элементы триангуляционной модели имеют свои названия.

![](images/tin_details_7.svg){width="100%"}

## Центроид и срединная ось

::: columns
::: {.column width="50%"}
**Центроид** --- точка, представляющая среднее значение координат полигона:

$$
C = \Bigg(\frac{1}{n}\sum_{i=0}^n x_i, \frac{1}{n}\sum_{i=0}^n y_i \Bigg)
$$

**Срединная ось** --- линия равноудаленная от границ полигона.
:::

::: {.column width="50%"}
![](images/centroid_axis.svg){width="100%"}
:::
:::

::: callout-tip
## Применение

Используются для картографической генерализации.
:::

## Буферные зоны

**Буферная зона** --- это множество точек, располагающихся в пределах заданного расстояния относительно объекта.

::: columns
::: {.column width="40%"}
-   буфер точки представляет собой круг;

-   буфер полигона может быть положительным и отрицательным;

-   буфер точки или линии всегда положительный.
:::

::: {.column width="60%"}
![](images/buffering.svg){width="65%"}
:::
:::

::: callout-tip
## Применение

Используются при анализе влияния. Например, определения водоохранных зон.
:::

## Преобразование моделей объектов

Между любыми моделями пространственных объектов возможны взаимные преобразования.

::: columns
::: {.column width="60%"}
![](images/conversions.svg){width="100%"}
:::

::: {.column width="40%"}
::: callout-tip
## Применение

Например, можно получить из полигона заповедника поворотные точки его границы. Или восстановить линию почвенного профиля по точкам разрезов.
:::

::: callout-important
## Мультигеометрия

При конвертации полигона или линии в точки обычно получается мультиточечный объект.
:::
:::
:::

## Преобразования мультиобъектов

В некоторых случаях требуется преобразовать мультиобъект в множество отдельных объектов и наоборот.

![](images/multi_conv.svg){width="100%"}

::: callout-tip
## Применение

Например, требуется провести анализ в пределах отдельных островов архипелага.
:::

## Слияние

**Слияние** --- это объединение геометрий пересекающихся (касающихся) объектов с одинаковым значением атрибута.

![](images/dissolve.svg){width="85%"}

::: callout-tip
## Применение

Слияние всегда сопровождает агрегирование атрибутов и используется при укрупнении единиц картографирования. Также может применяться при векторизации, когда объект создается по фрагментам, которые далее необходимо объединить.
:::

## Оверлей

**Оверлей** --- пространственное наложение двух или более пространственных объектов, при котором образуется их геометрическая и атрибутивная композиция.

![](images/overlay.svg){width="100%"}

**Оверлей** --- одна из самых полезных геометрических операций.

## Оверлей

::: columns
::: {.column width="50%"}
*Пересечение* используется для **обрезки данных** по указанной области.

Область обрезки может быть произвольной, но чаще всего используется ограничивающий прямоугольник

::: callout-note
## Clip

Обрезка данных является частным случаем пересечения с полигональным объектов, при котором наследуются только атрибуты обрезаемых объевто. Она настолько распространена, что для нее используется особое название --- **Clip**.
:::
:::

::: {.column width="50%"}
![](images/clip.svg){width="100%"}
:::
:::

## Библиография
